!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}({6:function(e,t){let n;n=chrome||browser;const a=e=>new Promise((t,a)=>n.storage.local.get(e,e=>n.runtime.lastError?a(Error(n.runtime.lastError.message)):t(e)));document.getElementById("elimina-tutti").addEventListener("click",()=>{confirm("Sicuro di volerli eliminare tutti?")&&(n.storage.local.set({msgProgrammati:[]}),document.getElementById("elenco-messaggi").innerHTML='<tr class="row100 body">\n        <td class="cell100 column1" colspan=4><span class="text-center">Nessun messaggio programmato!</span></td>\n    </tr>')});const r=async(e,t)=>{if(confirm("Sicuro di voler eliminare il messaggio?")){let r;try{if(r=(await a("msgProgrammati")).msgProgrammati,null==r)throw Exception();r.splice(t,1)}catch(e){r=[]}n.storage.local.set({msgProgrammati:r}),e.parentElement.parentElement.remove()}},l=async(e,t,r,l,o)=>{let s;console.log(`msg[${e}][${t}] = ${r}`);try{if(s=(await a("msgProgrammati")).msgProgrammati,null==s)throw Exception();s[e][t]=r}catch(e){s=[]}try{n.storage.local.set({msgProgrammati:s}),l.className+=" td-success"}catch(e){console.error(e),l.className+=" td-error"}setTimeout(()=>{l.className=o},500)};document.addEventListener("DOMContentLoaded",async()=>{try{(await a("temaScuro")).temaScuro?(document.getElementById("tabella").className="table100 ver3 m-b-110",document.getElementById("style").setAttribute("href","programmati/css/stylesDark.css")):document.getElementById("tabella").className="table100 ver1 m-b-110";const e=(await a("msgProgrammati")).msgProgrammati;if(e.length>0){document.getElementById("elenco-messaggi").innerHTML="";for(let t=0;t<e.length;t++){const n=e[t].orario.split("T");let a=`${n[0]} alle ${n[1]}`;const o=["Whatsapp","Telegram","Messenger","Meet","Instagram","Tellonym"];let s=`<select id="piattaforma-${t}" class="form-select">`;try{for(let n=0;n<o.length;n++){const a=o[n]==e[t].piattaforma?" selected":"";s+=`<option value="${o[n]}"${a}>${o[n]}</option>`}}catch(e){console.error(e)}s+="</select>",document.getElementById("elenco-messaggi").innerHTML+=`<tr class="row100 body">\n    <td class="cell100 column1" contenteditable="true" id="msg-${t}">${e[t].msg}</td>\n    <td class="cell100 column2" contenteditable="true" id="nome-${t}">${e[t].nome}</td>\n    <td class="cell100 column3" contenteditable="true" id="orario-${t}">${a}</td>\n    <td class="cell100 column2" contenteditable="true">${s}</td>\n    <td class="cell100 column2"><input type="checkbox" id="enabled-${t}" class="form-control" ${e[t].enabled?"checked":""}></td>\n    <td class="cell100 column6">\n        <button class="btn btn-danger" id="elimina-${t}">\n            <i class="fa fa-trash"></i>\n        </button>\n    </td>\n</tr>`,setTimeout(()=>{document.getElementById("msg-"+t).addEventListener("keypress",(async function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),await l(t,"msg",this.innerHTML,this,"cell100 column1"))})),document.getElementById("nome-"+t).addEventListener("keypress",(async function(e){"Enter"===e.key&&(e.preventDefault(),await l(t,"nome",this.innerText,this,"cell100 column2"))})),document.getElementById("orario-"+t).addEventListener("keypress",(async function(e){if("Enter"===e.key){e.preventDefault();const n=this.innerText.split(" alle ");await l(t,"orario",`${n[0]}T${n[1]}`,this,"cell100 column3")}})),document.getElementById("piattaforma-"+t).addEventListener("change",(async function(e){await l(t,"piattaforma",this.value,this.parentElement,"cell100 column2")})),document.getElementById("enabled-"+t).addEventListener("click",(async function(e){await l(t,"enabled",this.checked,this.parentElement,"cell100 column2")})),document.getElementById("elimina-"+t).addEventListener("click",(async function(){await r(this,parseInt(this.id.split("-")[1]))}))},500)}}else document.getElementById("elenco-messaggi").innerHTML='<tr class="row100 body">\n        <td class="cell100 column1" colspan=4><span class="text-center">Nessun messaggio programmato!</span></td>\n    </tr>'}catch(e){console.error(e)}})}});