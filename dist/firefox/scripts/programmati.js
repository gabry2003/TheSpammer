!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}({6:function(e,t){let n;n=chrome||browser;const r=e=>new Promise((t,r)=>n.storage.local.get(e,e=>n.runtime.lastError?r(Error(n.runtime.lastError.message)):t(e)));document.getElementById("elimina-tutti").addEventListener("click",()=>{confirm("Sicuro di volerli eliminare tutti?")&&(n.storage.local.set({msgProgrammati:[]}),document.getElementById("elenco-messaggi").innerHTML='<tr class="row100 body">\n        <td class="cell100 column1" colspan=4><span class="text-center">Nessun messaggio programmato!</span></td>\n    </tr>')});const a=async(e,t)=>{if(confirm("Sicuro di voler eliminare il messaggio?")){let a;try{if(a=(await r("msgProgrammati")).msgProgrammati,null==a)throw Exception();a.splice(t,1)}catch(e){a=[]}n.storage.local.set({msgProgrammati:a}),e.parentElement.parentElement.remove()}},o=async(e,t,a,o,s)=>{let l;try{if(l=(await r("msgProgrammati")).msgProgrammati,null==l)throw Exception();l[e][t]=a}catch(e){l=[]}try{n.storage.local.set({msgProgrammati:l}),o.className+=" td-success"}catch(e){console.error(e),o.className+=" td-error"}setTimeout(()=>{o.className=s},500)};document.addEventListener("DOMContentLoaded",async()=>{try{(await r("temaScuro")).temaScuro?(document.getElementById("tabella").className="table100 ver3 m-b-110",document.getElementById("style").setAttribute("href","programmati/css/stylesDark.css")):document.getElementById("tabella").className="table100 ver1 m-b-110";const e=(await r("msgProgrammati")).msgProgrammati;if(e.length>0){document.getElementById("elenco-messaggi").innerHTML="";for(let t=0;t<e.length;t++){const n=e[t].orario.split("T");let r=`${n[0]} alle ${n[1]}`;document.getElementById("elenco-messaggi").innerHTML+=`<tr class="row100 body">\n    <td class="cell100 column1" contenteditable="true" id="msg-${t}">${e[t].msg}</td>\n    <td class="cell100 column2" contenteditable="true" id="nome-${t}">${e[t].nome}</td>\n    <td class="cell100 column3" contenteditable="true" id="orario-${t}">${r}</td>\n    <td class="cell100 column4" id="orario-${t}">${e[t].piattaforma}</td>\n    <td class="cell100 column5">\n        <button class="btn btn-danger" id="elimina-${t}">\n            <i class="fa fa-trash"></i>\n        </button>\n    </td>\n</tr>`,setTimeout(()=>{document.getElementById("msg-"+t).addEventListener("keypress",(async function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),await o(t,"msg",this.innerHTML,this,"cell100 column1"))})),document.getElementById("nome-"+t).addEventListener("keypress",(async function(e){"Enter"===e.key&&(e.preventDefault(),await o(t,"nome",this.innerText,this,"cell100 column2"))})),document.getElementById("orario-"+t).addEventListener("keypress",(async function(e){if("Enter"===e.key){e.preventDefault();const n=this.innerText.split(" alle ");await o(t,"orario",`${n[0]}T${n[1]}`,this,"cell100 column3")}})),document.getElementById("elimina-"+t).addEventListener("click",(async function(){await a(this,parseInt(this.id.split("-")[1]))}))},500)}}else document.getElementById("elenco-messaggi").innerHTML='<tr class="row100 body">\n        <td class="cell100 column1" colspan=4><span class="text-center">Nessun messaggio programmato!</span></td>\n    </tr>'}catch(e){console.error(e)}})}});